{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/school/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://placeholder.supabase.co';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'placeholder';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\nexport type Student = {\r\n  id: string;\r\n  full_name: string;\r\n  national_id: string;\r\n  grade: string;\r\n  section: string;\r\n  dob: string;\r\n  phone: string;\r\n  address: string;\r\n  status: 'منتظم' | 'منقطع' | 'محول';\r\n  image_url?: string;\r\n  created_at?: string;\r\n};\r\n\r\nexport type Log = {\r\n  id: string;\r\n  action: string;\r\n  details: any;\r\n  user_id: string;\r\n  created_at: string;\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAE9D,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///F:/school/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Users, UserCheck, TrendingUp, AlertCircle, Calendar, GraduationCap, Coins } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\nexport default function DashboardPage() {\r\n    const [stats, setStats] = useState({\r\n        students_count: 0,\r\n        staff_count: 0,\r\n        attendance_today: 0,\r\n        fees_collected: 0\r\n    });\r\n    const [recentLogs, setRecentLogs] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    const fetchDashboardData = async () => {\r\n        try {\r\n            // Parallel Fetching for speed\r\n            const [students, staff, logs] = await Promise.all([\r\n                supabase.from('students').select('*', { count: 'exact', head: true }),\r\n                supabase.from('staff').select('*', { count: 'exact', head: true }),\r\n                supabase.from('logs').select('*').order('created_at', { ascending: false }).limit(5)\r\n            ]);\r\n\r\n            // Fake attendance/fees for demo until data is real\r\n            setStats({\r\n                students_count: students.count || 0,\r\n                staff_count: staff.count || 0,\r\n                attendance_today: 0, // Need accurate attendance table query\r\n                fees_collected: 0\r\n            });\r\n\r\n            setRecentLogs(logs.data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching dashboard data:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const cards = [\r\n        {\r\n            title: 'إجمالي الطلاب',\r\n            value: stats.students_count,\r\n            icon: GraduationCap,\r\n            trend: '+12 هذا الأسبوع',\r\n            color: 'text-blue-600',\r\n            bg: 'bg-blue-50'\r\n        },\r\n        {\r\n            title: 'الحضور اليوم',\r\n            value: `${stats.attendance_today}%`,\r\n            icon: UserCheck,\r\n            trend: 'معدل طبيعي',\r\n            color: 'text-emerald-600',\r\n            bg: 'bg-emerald-50'\r\n        },\r\n        {\r\n            title: 'هيئة التدريس',\r\n            value: stats.staff_count,\r\n            icon: Users,\r\n            check: 'جميعهم متواجدون',\r\n            color: 'text-indigo-600',\r\n            bg: 'bg-indigo-50'\r\n        },\r\n        {\r\n            title: 'المتحصلات (شهر)',\r\n            value: '0 ج.م',\r\n            icon: Coins,\r\n            trend: 'تم تحصيل 0%',\r\n            color: 'text-amber-600',\r\n            bg: 'bg-amber-50'\r\n        },\r\n    ];\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ height: '50vh' }}>\r\n                <div style={{ width: '40px', height: '40px', border: '3px solid #e2e8f0', borderTopColor: '#0f172a', borderRadius: '50%', animation: 'spin 1s linear infinite' }} />\r\n                <style jsx>{`@keyframes spin { 100% { transform: rotate(360deg); } }`}</style>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ maxWidth: '1400px', margin: '0 auto' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '2rem' }}>\r\n                <div>\r\n                    <h1 style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>نظرة عامة</h1>\r\n                    <p style={{ color: 'var(--text-muted)' }}>مرحباً بك في لوحة تحكم المدرسة الرقمية.</p>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '0.75rem' }}>\r\n                    <button className=\"btn btn-outline\">\r\n                        <Calendar size={18} />\r\n                        <span>تقارير اليوم</span>\r\n                    </button>\r\n                    <button className=\"btn btn-primary\" style={{ background: 'var(--primary)' }}>\r\n                        <TrendingUp size={18} />\r\n                        <span>تحديث البيانات</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Cards */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))', gap: '1.5rem', marginBottom: '2rem' }}>\r\n                {cards.map((card, idx) => (\r\n                    <motion.div\r\n                        key={idx}\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: idx * 0.1 }}\r\n                        className=\"card\"\r\n                        style={{ display: 'flex', flexDirection: 'column', gap: '1rem', borderTop: `4px solid currentColor`, color: card.color.includes('blue') ? '#2563eb' : card.color.includes('emerald') ? '#10b981' : card.color.includes('amber') ? '#d97706' : '#4f46e5' }}\r\n                    >\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                            <div>\r\n                                <p style={{ fontSize: '0.9rem', color: 'var(--text-secondary)', fontWeight: '600' }}>{card.title}</p>\r\n                                <h3 style={{ fontSize: '1.75rem', fontWeight: '800', color: 'var(--text-main)', marginTop: '0.25rem' }}>{card.value}</h3>\r\n                            </div>\r\n                            <div style={{ padding: '0.75rem', borderRadius: '0.75rem', background: card.bg.replace('bg-', 'var(--').replace('-50', '-50)') /* minimal hack for now, better to use vars */, backgroundColor: '#f1f5f9' }}>\r\n                                <card.icon size={24} />\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ fontSize: '0.85rem', display: 'flex', alignItems: 'center', gap: '0.5rem', color: 'var(--text-muted)' }}>\r\n                            <TrendingUp size={14} />\r\n                            <span>{card.trend || card.check}</span>\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(12, 1fr)', gap: '1.5rem' }}>\r\n                {/* Recent Activity Section */}\r\n                <div className=\"card\" style={{ gridColumn: 'span 8' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '1.5rem' }}>\r\n                        <h3 style={{ fontWeight: '700' }}>سجل النشاطات الحديثة</h3>\r\n                        <button style={{ color: 'var(--brand)', fontSize: '0.9rem', fontWeight: '600' }}>عرض الكل</button>\r\n                    </div>\r\n\r\n                    <div className=\"table-wrapper\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>النشاط</th>\r\n                                    <th>المستخدم</th>\r\n                                    <th>التوقيت</th>\r\n                                    <th>الحالة</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {recentLogs.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan={4} style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-muted)' }}>لا توجد بيانات حالياً</td>\r\n                                    </tr>\r\n                                ) : (\r\n                                    recentLogs.map((log) => (\r\n                                        <tr key={log.id}>\r\n                                            <td style={{ fontWeight: '600' }}>{log.action}</td>\r\n                                            <td>{log.user_id || 'System'}</td>\r\n                                            <td style={{ direction: 'ltr', textAlign: 'right' }}>\r\n                                                {new Date(log.created_at).toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' })}\r\n                                            </td>\r\n                                            <td>\r\n                                                <span className=\"status-badge status-info\">مكتمل</span>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Quick Actions / Alerts */}\r\n                <div className=\"card\" style={{ gridColumn: 'span 4', display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                    <div>\r\n                        <h3 style={{ fontWeight: '700', marginBottom: '1rem' }}>تنبيهات هامة</h3>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                            <div style={{ padding: '1rem', background: '#fff7ed', borderRight: '4px solid #f97316', borderRadius: '4px', fontSize: '0.9rem' }}>\r\n                                <div style={{ fontWeight: 'bold', color: '#9a3412', marginBottom: '0.25rem' }}>سداد المصروفات</div>\r\n                                <p style={{ color: '#c2410c' }}>موعد استحقاق القسط الأول يقترب.</p>\r\n                            </div>\r\n                            <div style={{ padding: '1rem', background: '#ecfdf5', borderRight: '4px solid #10b981', borderRadius: '4px', fontSize: '0.9rem' }}>\r\n                                <div style={{ fontWeight: 'bold', color: '#065f46', marginBottom: '0.25rem' }}> اكتمال البيانات</div>\r\n                                <p style={{ color: '#047857' }}>يرجى مراجعة ملفات الطلاب الجدد.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}