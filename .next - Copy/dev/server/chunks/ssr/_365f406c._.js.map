{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/school/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://placeholder.supabase.co';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'placeholder';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\nexport type Student = {\r\n  id: string;\r\n  full_name: string;\r\n  national_id: string;\r\n  grade: string;\r\n  section: string;\r\n  dob: string;\r\n  phone: string;\r\n  address: string;\r\n  status: 'منتظم' | 'منقطع' | 'محول';\r\n  image_url?: string;\r\n  created_at?: string;\r\n};\r\n\r\nexport type Log = {\r\n  id: string;\r\n  action: string;\r\n  details: any;\r\n  user_id: string;\r\n  created_at: string;\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAE9D,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///F:/school/app/dashboard/logs/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Search, Download, Loader2, RefreshCcw } from 'lucide-react';\r\nimport { supabase, type Log } from '@/lib/supabase';\r\n\r\nexport default function LogsPage() {\r\n    const [logs, setLogs] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const fetchLogs = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('logs')\r\n                .select('*')\r\n                .order('created_at', { ascending: false })\r\n                .limit(50);\r\n\r\n            if (error) throw error;\r\n            setLogs(data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching logs:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchLogs();\r\n    }, []);\r\n\r\n    const filteredLogs = logs.filter(log =>\r\n        (log.details || '').includes(searchTerm) ||\r\n        (log.action || '').includes(searchTerm)\r\n    );\r\n\r\n    return (\r\n        <div style={{ maxWidth: '1200px', margin: '0 auto' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\r\n                <div>\r\n                    <h1 style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>سجل العمليات</h1>\r\n                    <p className=\"text-muted\">مراقبة كافة التحركات والعمليات على النظام</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"card\" style={{ marginBottom: '1.5rem', padding: '1rem' }}>\r\n                <div style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>\r\n                    <div style={{ position: 'relative', flex: 1, maxWidth: '400px' }}>\r\n                        <Search size={18} style={{ position: 'absolute', right: '12px', top: '50%', transform: 'translateY(-50%)', color: 'var(--text-muted)' }} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"البحث في السجل...\"\r\n                            className=\"input-field\"\r\n                            style={{ paddingRight: '40px' }}\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <button onClick={fetchLogs} className=\"btn btn-outline\">\r\n                        <RefreshCcw size={18} />\r\n                    </button>\r\n                    <button className=\"btn btn-outline\">\r\n                        <Download size={18} />\r\n                        <span>تصدير</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"card\" style={{ padding: 0 }}>\r\n                <div className=\"table-wrapper\" style={{ border: 'none', borderRadius: 0 }}>\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>العملية</th>\r\n                                <th>التفاصيل</th>\r\n                                <th>المستخدم</th>\r\n                                <th>التاريخ والوقت</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {loading ? (\r\n                                <tr>\r\n                                    <td colSpan={4} style={{ padding: '2rem', textAlign: 'center' }}>\r\n                                        <div className=\"flex-center\" style={{ gap: '0.5rem', color: 'var(--text-muted)' }}>\r\n                                            <Loader2 className=\"animate-spin\" />\r\n                                            <span>جاري تحميل السجل...</span>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ) : filteredLogs.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan={4} style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)' }}>\r\n                                        لا توجد عمليات مسجلة.\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (\r\n                                filteredLogs.map((log) => (\r\n                                    <tr key={log.id}>\r\n                                        <td>\r\n                                            <span className={`status-badge ${log.action?.includes('إضافة') ? 'status-success' :\r\n                                                    log.action?.includes('حذف') ? 'status-error' :\r\n                                                        log.action?.includes('تعديل') ? 'status-warning' : 'status-info'\r\n                                                }`}>\r\n                                                {log.action}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td>{log.details}</td>\r\n                                        <td>{log.user_id}</td>\r\n                                        <td style={{ direction: 'ltr', textAlign: 'right', fontSize: '0.9rem', color: 'var(--text-muted)' }}>\r\n                                            {new Date(log.created_at).toLocaleString('ar-EG')}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}